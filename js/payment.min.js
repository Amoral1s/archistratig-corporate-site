document.addEventListener("DOMContentLoaded",(()=>{if(document.querySelector(".anon-form")){const e=document.querySelector(".rem-pay");document.querySelectorAll(".button.donate").forEach((e=>e.classList.add("disabled"))),e.remove()}const e=document.querySelectorAll(".pay-form .item"),t=document.querySelectorAll(".pay-form .item span"),o=document.querySelector(".summ-input"),a=document.querySelectorAll(".pay-form-toggle .button"),n=document.querySelector(".pay-name"),r=document.querySelector(".pay-email"),u=document.querySelector(".pay-phone");let p=1;a.forEach(((e,t)=>{e.addEventListener("click",(()=>{a.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),0==t&&(p=1),1==t&&(p=2)}))})),e.forEach(((a,n)=>{a.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),a.classList.add("active"),e.length==n+1?(o.parentElement.style.display="block",o.value="0"):(o.parentElement.style.display="none",o.value=+t[n].textContent.trim())}))}));const c=()=>{let e=+o.value,t=n.value,a=r.value,c=u.value;""!=e&&""!=t&&""!=a&&""!=c&&0!==e?(1===p&&((e,t,o,a)=>{var n=new cp.CloudPayments;n.oncomplete=e=>{console.log("result",e)},n.pay("charge",{publicId:"pk_2a9a662b86b90b4501d13446a3f5d",description:"Благотворительный взнос, сбор средств на восстановление Храма",amount:e,accountId:t,currency:"RUB",payer:{firstName:o,phone:a}},{onSuccess:function(e){jQuery("#thx-pay").fadeIn(200),$(".popup").addClass("popup-thx"),$("#thx-pay").removeClass("popup-thx"),jQuery(".overlay").fadeIn(300),setTimeout((function(){jQuery(".overlay").fadeOut(300),jQuery(".popup").fadeOut(300),$(".popup").removeClass("popup-thx"),jQuery("#thx-pay").fadeOut(200)}),2500)},onFail:function(e,t){alert("Ошибка! Платеж не прошел!")}}).then((e=>{console.log("result",e)}))})(e,a,t,c),2===p&&((e,t,o,a)=>{var n=new cp.CloudPayments({yandexPaySupport:!1,applePaySupport:!1,googlePaySupport:!1,masterPassSupport:!1,tinkoffInstallmentSupport:!1});n.oncomplete=e=>{console.log("result",e)};var r={Items:[{label:"Ежемесячное пожертвование",price:e,quantity:1,amount:e,vat:20,method:0,object:0}],taxationSystem:0,email:t,phone:a,isBso:!1,amounts:{electronic:e,advancePayment:0,credit:0,provision:0}},u={CloudPayments:{CustomerReceipt:r,recurrent:{interval:"Month",period:1,customerReceipt:r}}};n.pay("charge",{publicId:"pk_2a9a662b86b90b4501d13446a3f5d",description:"Ежемесячный благотворительный взнос, сбор средств на восстановление Храма",amount:e,accountId:t,currency:"RUB",payer:{firstName:o,phone:a},data:u},{onSuccess:function(e){jQuery("#thx-pay").fadeIn(200),$(".popup").addClass("popup-thx"),$("#thx-pay").removeClass("popup-thx"),jQuery(".overlay").fadeIn(300),setTimeout((function(){jQuery(".overlay").fadeOut(300),jQuery(".popup").fadeOut(300),$(".popup").removeClass("popup-thx"),jQuery("#thx-pay").fadeOut(200)}),2500)},onFail:function(e,t){alert("Ошибка! Платеж не прошел!")}}).then((e=>{console.log("result",e)}))})(e,a,t,c)):alert("Заполните все поля!")};document.querySelector(".go-pay").addEventListener("click",(()=>{c()}))}));