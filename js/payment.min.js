document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".pay-form .item"),t=document.querySelectorAll(".pay-form .item span"),a=document.querySelector(".summ-input"),o=document.querySelectorAll(".pay-form-toggle .button"),n=document.querySelector(".pay-name"),r=document.querySelector(".pay-email"),u=document.querySelector(".pay-phone");let c=1;o.forEach(((e,t)=>{e.addEventListener("click",(()=>{o.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),0==t&&(c=1),1==t&&(c=2)}))})),e.forEach(((o,n)=>{o.addEventListener("click",(()=>{e.forEach((e=>e.classList.remove("active"))),o.classList.add("active"),e.length==n+1?(a.parentElement.style.display="block",a.value="0"):(a.parentElement.style.display="none",a.value=+t[n].textContent.trim())}))}));const l=()=>{let e=+a.value,t=n.value,o=r.value,l=u.value;""!=e&&""!=t&&""!=o&&""!=l&&0!==e?(1===c&&((e,t,a,o)=>{var n=new cp.CloudPayments;n.oncomplete=e=>{console.log("result",e)},n.pay("charge",{publicId:"pk_2a9a662b86b90b4501d13446a3f5d",description:"Благотворительный взнос, сбор средств на восстановление Храма",amount:e,accountId:t,currency:"RUB",payer:{firstName:a,phone:o}},{onSuccess:function(e){jQuery("#thx-pay").fadeIn(200),$(".popup").addClass("popup-thx"),$("#thx-pay").removeClass("popup-thx"),jQuery(".overlay").fadeIn(300),setTimeout((function(){jQuery(".overlay").fadeOut(300),jQuery(".popup").fadeOut(300),jQuery("#thx-pay").fadeOut(200)}),2500)},onFail:function(e,t){alert("Ошибка! Платеж не прошел!")}}).then((e=>{console.log("result",e)}))})(e,o,t,l),2===c&&((e,t,a,o)=>{var n=new cp.CloudPayments({yandexPaySupport:!1,applePaySupport:!1,googlePaySupport:!1,masterPassSupport:!1,tinkoffInstallmentSupport:!1});n.oncomplete=e=>{console.log("result",e)};var r={Items:[{label:"Ежемесячное пожертвование",price:e,quantity:1,amount:e,vat:20,method:0,object:0}],taxationSystem:0,email:t,phone:o,isBso:!1,amounts:{electronic:e,advancePayment:0,credit:0,provision:0}},u={CloudPayments:{CustomerReceipt:r,recurrent:{interval:"Month",period:1,customerReceipt:r}}};n.pay("charge",{publicId:"pk_2a9a662b86b90b4501d13446a3f5d",description:"Ежемесячный благотворительный взнос, сбор средств на восстановление Храма",amount:e,accountId:t,currency:"RUB",payer:{firstName:a,phone:o},data:u},{onSuccess:function(e){jQuery("#thx").fadeIn(200),$(".popup").addClass("popup-thx"),$("#thx").removeClass("popup-thx"),jQuery(".overlay").fadeIn(300),setTimeout((function(){jQuery(".overlay").fadeOut(300),jQuery(".popup").fadeOut(300),jQuery("#thx").fadeOut(200)}),2500)},onFail:function(e,t){alert("Ошибка! Платеж не прошел!")}}).then((e=>{console.log("result",e)}))})(e,o,t,l)):alert("Заполните все поля!")};document.querySelector(".go-pay").addEventListener("click",(()=>{l()}))}));